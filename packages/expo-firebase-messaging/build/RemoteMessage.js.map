{"version":3,"file":"RemoteMessage.js","sourceRoot":"","sources":["../src/RemoteMessage.ts"],"names":[],"mappings":"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","sourcesContent":["import invariant from 'invariant';\n\nimport { utils } from 'expo-firebase-app';\nimport { NativeInboundRemoteMessage, NativeOutboundRemoteMessage } from './types';\n\nconst { isObject, generatePushID } = utils;\n\nexport default class RemoteMessage {\n  _collapseKey?: string;\n  _data: { [key: string]: string } = {};\n  _from?: string;\n  _messageId: string = generatePushID();\n  _messageType?: string;\n  _sentTime?: number;\n  _to?: string;\n  _ttl: number;\n\n  constructor(inboundMessage?: NativeInboundRemoteMessage) {\n    if (inboundMessage) {\n      this._collapseKey = inboundMessage.collapseKey;\n      this._data = inboundMessage.data;\n      this._from = inboundMessage.from;\n      this._messageId = inboundMessage.messageId;\n      this._messageType = inboundMessage.messageType;\n      this._sentTime = inboundMessage.sentTime;\n    }\n    // defaults\n    this._data = this._data || {};\n    // TODO: Is this the best way to generate an ID?\n    this._messageId = this._messageId || generatePushID();\n    this._ttl = 3600;\n  }\n\n  get collapseKey(): string | undefined {\n    return this._collapseKey;\n  }\n\n  get data(): { [key: string]: string } {\n    return this._data;\n  }\n\n  get from(): string | undefined {\n    return this._from;\n  }\n\n  get messageId(): string {\n    return this._messageId;\n  }\n\n  get messageType(): string | undefined {\n    return this._messageType;\n  }\n\n  get sentTime(): number | undefined {\n    return this._sentTime;\n  }\n\n  get to(): string | undefined {\n    return this._to;\n  }\n\n  get ttl(): number {\n    return this._ttl;\n  }\n\n  /**\n   *\n   * @param collapseKey\n   * @returns {RemoteMessage}\n   */\n  setCollapseKey(collapseKey: string): RemoteMessage {\n    this._collapseKey = collapseKey;\n    return this;\n  }\n\n  /**\n   *\n   * @param data\n   * @returns {RemoteMessage}\n   */\n  setData(data: { [key: string]: string } = {}) {\n    invariant(\n      isObject(data),\n      `RemoteMessage:setData expects an object but got type '${typeof data}'.`\n    );\n    this._data = data;\n    return this;\n  }\n\n  /**\n   *\n   * @param messageId\n   * @returns {RemoteMessage}\n   */\n  setMessageId(messageId: string): RemoteMessage {\n    this._messageId = messageId;\n    return this;\n  }\n\n  /**\n   *\n   * @param messageType\n   * @returns {RemoteMessage}\n   */\n  setMessageType(messageType: string): RemoteMessage {\n    this._messageType = messageType;\n    return this;\n  }\n\n  /**\n   *\n   * @param to\n   * @returns {RemoteMessage}\n   */\n  setTo(to: string): RemoteMessage {\n    this._to = to;\n    return this;\n  }\n\n  /**\n   *\n   * @param ttl\n   * @returns {RemoteMessage}\n   */\n  setTtl(ttl: number): RemoteMessage {\n    this._ttl = ttl;\n    return this;\n  }\n\n  build(): NativeOutboundRemoteMessage {\n    if (!this._data) throw new Error('RemoteMessage: Missing required `data` property');\n    if (!this._messageId) throw new Error('RemoteMessage: Missing required `messageId` property');\n    if (!this._to) throw new Error('RemoteMessage: Missing required `to` property');\n    if (!this._ttl) throw new Error('RemoteMessage: Missing required `ttl` property');\n\n    return {\n      collapseKey: this._collapseKey,\n      data: this._data,\n      messageId: this._messageId,\n      messageType: this._messageType,\n      to: this._to,\n      ttl: this._ttl,\n    };\n  }\n}\n"]}