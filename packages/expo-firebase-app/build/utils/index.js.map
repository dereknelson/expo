{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/utils/index.ts"],"names":[],"mappings":"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","sourcesContent":["import NativeError from '../NativeError';\n// todo cleanup unused utilities from legacy code\n\n// modeled after base64 web-safe chars, but ordered by ASCII\nconst PUSH_CHARS = '-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz';\nconst AUTO_ID_CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\nconst { hasOwnProperty } = Object;\n\n// const DEFAULT_CHUNK_SIZE = 50;\n/**\n * Checks for property existence by name on the specified object\n * @param object\n * @param property\n * @returns {*}\n */\nexport function hop(object: any, property: string): boolean {\n  return hasOwnProperty.call(object, property);\n}\n\n/**\n * Deep get a value from an object.\n * @website https://github.com/Salakar/deeps\n * @param object\n * @param path\n * @param joiner\n * @returns {*}\n */\nexport function deepGet(object: any, path: string, joiner: string = '/'): any {\n  if (!isObject(object) && !Array.isArray(object)) return undefined;\n  const keys = path.split(joiner);\n\n  let i = 0;\n  let tmp = object;\n  const len = keys.length;\n\n  while (i < len) {\n    const key = keys[i++];\n    if (!tmp || !hasOwnProperty.call(tmp, key)) return undefined;\n    tmp = tmp[key];\n  }\n\n  return tmp;\n}\n\n/**\n * Deep check if a key exists.\n * @website https://github.com/Salakar/deeps\n * @param object\n * @param path\n * @param joiner\n * @returns {*}\n */\nexport function deepExists(object: any, path: string, joiner: string = '/'): boolean {\n  const keys = path.split(joiner);\n\n  let i = 0;\n  let tmp = object;\n  const len = keys.length;\n\n  while (i < len) {\n    const key = keys[i++];\n    if (!tmp || !hasOwnProperty.call(tmp, key)) return false;\n    tmp = tmp[key];\n  }\n\n  return tmp !== undefined;\n}\n\n/**\n * Deep Check if obj1 keys are contained in obj2\n * @param obj1\n * @param obj2\n * @returns {boolean}\n */\nexport function areObjectKeysContainedInOther(obj1: any, obj2: any): boolean {\n  if (!isObject(obj1) || !isObject(obj2)) {\n    return false;\n  }\n  const keys1 = Object.keys(obj1);\n  const keys2 = Object.keys(obj2);\n  if (isArrayContainedInOther(keys1, keys2)) {\n    return keys1\n      .filter(key => isObject(obj1[key]))\n      .reduce((acc, cur) => acc && areObjectKeysContainedInOther(obj1[cur], obj2[cur]), true);\n  }\n  return false;\n}\n\n/**\n * Check if arr1 is contained in arr2\n * @param arr1\n * @param arr2\n * @returns {boolean}\n */\nexport function isArrayContainedInOther(arr1: any[], arr2: any[]): boolean {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) {\n    return false;\n  }\n  return arr1.reduce((acc, cur) => acc && arr2.includes(cur), true);\n}\n\n/**\n * Simple is object check.\n * @param item\n * @returns {boolean}\n */\nexport function isObject(item: any): boolean {\n  return item ? typeof item === 'object' && !Array.isArray(item) && item !== null : false;\n}\n\n/**\n * Simple is function check\n * @param item\n * @returns {*|boolean}\n */\nexport function isFunction(item?: any): boolean {\n  return item ? typeof item === 'function' : false;\n}\n\n/**\n * Simple is string check\n * @param value\n * @return {boolean}\n */\nexport function isString(value: any): boolean {\n  return typeof value === 'string';\n}\n\n/**\n * Simple is boolean check\n * @param value\n * @return {boolean}\n */\nexport function isBoolean(value: any): boolean {\n  return typeof value === 'boolean';\n}\n\n/**\n *\n * @param string\n * @returns {*}\n */\nexport function tryJSONParse(string: string | null): any {\n  try {\n    return string && JSON.parse(string);\n  } catch (jsonError) {\n    return string;\n  }\n}\n\n/**\n *\n * @param data\n * @returns {*}\n */\nexport function tryJSONStringify(data: any): string | null {\n  try {\n    return JSON.stringify(data);\n  } catch (jsonError) {\n    return null;\n  }\n}\n\n/**\n * No operation func\n */\nexport function noop(): void {}\n\n/**\n * Remove a trailing forward slash from a string\n * @param str\n * @returns {*}\n */\nexport function stripTrailingSlash(str: string): string {\n  if (typeof str === 'string') {\n    return str.endsWith('/') ? str.slice(0, -1) : str;\n  }\n  return '';\n}\n\n/**\n * Returns a string typeof that's valid for Firebase usage\n * @param value\n * @return {*}\n */\nexport function typeOf(value: any): string {\n  if (value === null) return 'null';\n  if (Array.isArray(value)) return 'array';\n  return typeof value;\n}\n\n// timestamp of last push, used to prevent local collisions if you push twice in one ms.\nlet lastPushTime = 0;\n\n// we generate 72-bits of randomness which get turned into 12 characters and appended to the\n// timestamp to prevent collisions with other clients.  We store the last characters we\n// generated because in the event of a collision, we'll use those same characters except\n// \"incremented\" by one.\nconst lastRandChars: any[] = [];\n\n/**\n * Generate a firebase id - for use with ref().push(val, cb) - e.g. -KXMr7k2tXUFQqiaZRY4'\n * @param serverTimeOffset - pass in server time offset from native side\n * @returns {string}\n */\nexport function generatePushID(serverTimeOffset: number = 0): string {\n  const timeStampChars = new Array(8);\n  let now = new Date().getTime() + serverTimeOffset;\n  const duplicateTime = now === lastPushTime;\n\n  lastPushTime = now;\n\n  for (let i = 7; i >= 0; i -= 1) {\n    timeStampChars[i] = PUSH_CHARS.charAt(now % 64);\n    now = Math.floor(now / 64);\n  }\n\n  if (now !== 0) throw new Error('We should have converted the entire timestamp.');\n\n  let id = timeStampChars.join('');\n\n  if (!duplicateTime) {\n    for (let i = 0; i < 12; i += 1) {\n      lastRandChars[i] = Math.floor(Math.random() * 64);\n    }\n  } else {\n    // if the timestamp hasn't changed since last push,\n    // use the same random number, but increment it by 1.\n    let i;\n    for (i = 11; i >= 0 && lastRandChars[i] === 63; i -= 1) {\n      lastRandChars[i] = 0;\n    }\n\n    lastRandChars[i] += 1;\n  }\n\n  for (let i = 0; i < 12; i++) {\n    id += PUSH_CHARS.charAt(lastRandChars[i]);\n  }\n\n  if (id.length !== 20) throw new Error('Length should be 20.');\n\n  return id;\n}\n\n/**\n * Converts a code and message from a native event to a JS Error\n * @param code\n * @param message\n * @param additionalProps\n * @returns {Error}\n */\nexport function nativeToJSError(code: string, message: string, additionalProps: Object = {}) {\n  const error: any = new NativeError({ message, code });\n  Object.assign(error, additionalProps);\n  // exclude this function from the stack\n  const _stackArray = error.stack.split('\\n');\n  error.stack = _stackArray.splice(1, _stackArray.length).join('\\n');\n  return error;\n}\n\n/**\n *\n * @param object\n * @return {string}\n */\nexport function objectToUniqueId(object: Object): string {\n  if (!isObject(object) || object === null) return JSON.stringify(object);\n\n  const keys = Object.keys(object).sort();\n\n  let key = '{';\n  for (let i = 0; i < keys.length; i++) {\n    if (i !== 0) key += ',';\n    key += JSON.stringify(keys[i]);\n    key += ':';\n    key += objectToUniqueId(object[keys[i]]);\n  }\n\n  key += '}';\n  return key;\n}\n\n/**\n * Return the existing promise if no callback provided or\n * exec the promise and callback if optionalCallback is valid.\n *\n * @param promise\n * @param optionalCallback\n * @return {Promise}\n */\nexport function promiseOrCallback(\n  promise: Promise<any>,\n  optionalCallback?: Function\n): Promise<any> {\n  if (!isFunction(optionalCallback)) return promise;\n\n  return promise\n    .then(result => {\n      // some of firebase internal tests & methods only check/return one arg\n      // see https://github.com/firebase/firebase-js-sdk/blob/master/src/utils/promise.ts#L62\n      if (optionalCallback && optionalCallback.length === 1) {\n        optionalCallback(null);\n      } else if (optionalCallback) {\n        optionalCallback(null, result);\n      }\n\n      return Promise.resolve(result);\n    })\n    .catch(error => {\n      if (optionalCallback) optionalCallback(error);\n      return Promise.reject(error);\n    });\n}\n\n/**\n * Generate a firestore auto id for use with collection/document .add()\n * @return {string}\n */\nexport function firestoreAutoId(): string {\n  let autoId = '';\n\n  for (let i = 0; i < 20; i++) {\n    autoId += AUTO_ID_CHARS.charAt(Math.floor(Math.random() * AUTO_ID_CHARS.length));\n  }\n  return autoId;\n}\n"]}